<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±ÙˆÙ„Ø§Øª â€” Ø·Ø±ÙŠÙ‚Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ù‚Ø·Ø¹Ø© (Ø§Ù„Ø£Ø¯Ù‚)</title>

  <link rel="icon" type="image/png" sizes="32x32" href="icon-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">

  <style>
    body{font-family:Arial,sans-serif;direction:rtl;text-align:center;margin:30px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;max-width:900px;margin:0 auto}
    label{font-size:14px}
    input,select{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px}
    button{padding:12px 22px;margin-top:14px;background:#28a745;color:#fff;border:0;border-radius:10px;cursor:pointer}
    button:hover{background:#218838}
    .card{max-width:900px;margin:24px auto;border:1px solid #eee;border-radius:12px;padding:16px;text-align:start}
    h2{margin-bottom:6px}
    .big{font-size:20px;font-weight:bold}
    .muted{color:#666;font-size:13px}
  </style>
</head>
<body>
  <h2>ğŸ“ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±ÙˆÙ„Ø§Øª (Ø·Ø±ÙŠÙ‚Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ù‚Ø·Ø¹Ø© â€” Ø§Ù„Ø£Ø¯Ù‚ Ù„Ù„Ø¥Ù†ØªØ§Ø¬)</h2>
  <div class="muted">Ù†Ø­Ø³Ø¨ ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ø¨Ø© Ø§Ø¹ØªÙ…Ø§Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø³Ø·Ø±ØŒ Ø«Ù… Ù†Ø¶Ø±Ø¨Ù‡Ø§ Ø¨Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.</div>

  <div class="grid">
    <div>
      <label>Ø·ÙˆÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ… (Ø³Ù…)</label>
      <input type="number" id="designLength" step="0.01" value="11.7">
    </div>
    <div>
      <label>Ø¹Ø±Ø¶ Ø§Ù„ØªØµÙ…ÙŠÙ… (Ø³Ù…)</label>
      <input type="number" id="designWidth" step="0.01" value="4.5">
    </div>
    <div>
      <label>Ø·ÙˆÙ„ Ø§Ù„Ø±ÙˆÙ„ (Ù…)</label>
      <input type="number" id="rollLength" step="0.01" value="25">
    </div>
    <div>
      <label>Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆÙ„ (Ø³Ù…)</label>
      <input type="number" id="rollWidth" step="0.01" value="50">
    </div>
    <div>
      <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
      <input type="number" id="piecesRequired" step="1" value="1300">
    </div>
    <div>
      <label>Ø³Ø¹Ø± Ø§Ù„Ù…ØªØ±</label>
      <input type="number" id="pricePerMeter" step="0.01" value="2.20">
    </div>
    <div>
      <label>Ø§Ù„Ø¹Ù…Ù„Ø© Ù„Ø³Ø¹Ø± Ø§Ù„Ù…ØªØ±</label>
      <select id="priceCurrency">
        <option value="USD" selected>USD (Ø¯ÙˆÙ„Ø§Ø±)</option>
        <option value="AED">AED (Ø¯Ø±Ù‡Ù…)</option>
      </select>
    </div>
  </div>

  <button onclick="calculate()">Ø§Ø­Ø³Ø¨</button>

  <div class="card">
    <div class="big" id="totalLine">â€”</div>
    <div class="muted" id="pieceLine">â€”</div>
    <hr>
    <div class="muted" id="details">â€”</div>
  </div>

  <script>
    const AED_PER_USD = 3.67;

    function to2(x){ return Number.isFinite(x) ? x.toFixed(2) : "â€”"; }

    function calculate(){
      // Ù…Ø¯Ø®Ù„Ø§Øª
      const Lcm = parseFloat(document.getElementById('designLength').value);   // Ø·ÙˆÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø³Ù…
      const Wcm = parseFloat(document.getElementById('designWidth').value);    // Ø¹Ø±Ø¶ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø³Ù…
      const rollLenM = parseFloat(document.getElementById('rollLength').value);// Ø·ÙˆÙ„ Ø§Ù„Ø±ÙˆÙ„ Ù…
      const rollWcm  = parseFloat(document.getElementById('rollWidth').value);// Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆÙ„ Ø³Ù…
      const pieces   = parseInt(document.getElementById('piecesRequired').value,10);
      const price    = parseFloat(document.getElementById('pricePerMeter').value);
      const cur      = document.getElementById('priceCurrency').value;

      // ØªØ­Ù‚Ù‚ Ø£Ø³Ø§Ø³ÙŠ
      if([Lcm,Wcm,rollLenM,rollWcm,price].some(isNaN) || !Number.isInteger(pieces) || pieces<=0){
        alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.");
        return;
      }

      // ØªØ­ÙˆÙŠÙ„Ø§Øª
      const Lm = Lcm/100;  // Ø·ÙˆÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨Ø§Ù„Ù…ØªØ±
      // const Wm = Wcm/100; // Ø¹Ø±Ø¶ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨Ø§Ù„Ù…ØªØ± (ØºÙŠØ± Ù…Ø·Ù„ÙˆØ¨ Ù…Ø¨Ø§Ø´Ø± Ø¨Ø§Ù„Ø­Ø³Ø§Ø¨)

      // Ø³Ø¹Ø± Ø§Ù„Ù…ØªØ± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±
      const priceUSD = (cur === "USD") ? price : (price / AED_PER_USD);

      // Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø³Ø·Ø± = Ø£Ø±Ø¶ÙŠØ©(Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆÙ„ Ã· Ø¹Ø±Ø¶ Ø§Ù„ØªØµÙ…ÙŠÙ…)
      const perRow = Math.floor(rollWcm / Wcm);
      if(perRow <= 0){
        alert("Ø¹Ø±Ø¶ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø£ÙƒØ¨Ø± Ù…Ù† Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆÙ„ â€” Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±ØªÙŠØ¨ Ø£ÙŠ Ø­Ø¨Ø© ÙÙŠ Ø§Ù„Ø³Ø·Ø±.");
        return;
      }

      // Ø·Ø±ÙŠÙ‚Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ù‚Ø·Ø¹Ø©:
      // ØªÙƒÙ„ÙØ© Ø§Ù„Ø³Ø·Ø± (Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±) = Ø·ÙˆÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ… (Ù…) Ã— Ø³Ø¹Ø± Ø§Ù„Ù…ØªØ± (USD)
      const rowCostUSD = Lm * priceUSD;

      // ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ø¨Ø© = ØªÙƒÙ„ÙØ© Ø§Ù„Ø³Ø·Ø± Ã· Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø³Ø·Ø±
      const pieceCostUSD = rowCostUSD / perRow;

      // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
      const totalUSD = pieceCostUSD * pieces;
      const totalAED = totalUSD * AED_PER_USD;

      // ØªÙ‚Ø¯ÙŠØ± Ù„ÙˆØ¬Ø³ØªÙŠ: Ø§Ù„Ø£Ù…ØªØ§Ø± Ùˆ Ø§Ù„Ø±ÙˆÙ„Ø§Øª
      const rowsNeeded = Math.ceil(pieces / perRow);   // ÙƒÙ… Ø³Ø·Ø± Ù†Ø­ØªØ§Ø¬
      const metersNeeded = rowsNeeded * Lm;            // Ø£Ù…ØªØ§Ø± Ù…Ø·Ù„ÙˆØ¨Ø©
      const rollsNeeded  = Math.ceil(metersNeeded / rollLenM);

      // Ø¥Ø®Ø±Ø§Ø¬
      document.getElementById('totalLine').innerHTML =
        `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: USD ${to2(totalUSD)} â€” AED ${to2(totalAED)}`;

      document.getElementById('pieceLine').innerHTML =
        `ØªÙƒÙ„ÙØ© Ø§Ù„Ù‚Ø·Ø¹Ø©: USD ${to2(pieceCostUSD)} â€” AED ${to2(pieceCostUSD * AED_PER_USD)}`;

      document.getElementById('details').innerHTML =
        `Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø³Ø·Ø±: <b>${perRow}</b> Â· Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø·Ø±: <b>${rowsNeeded}</b> Â· Ø§Ù„Ø£Ù…ØªØ§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: <b>${to2(metersNeeded)}</b> Ù… Â· Ø§Ù„Ø±ÙˆÙ„Ø§Øª Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©: <b>${rollsNeeded}</b><br>
         Ù…Ø¯Ø®Ù„Ø§Øª: Ø·ÙˆÙ„/Ø¹Ø±Ø¶ Ø§Ù„ØªØµÙ…ÙŠÙ… = ${Lcm}Ã—${Wcm} Ø³Ù…ØŒ Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆÙ„ = ${rollWcm} Ø³Ù…ØŒ Ø·ÙˆÙ„ Ø§Ù„Ø±ÙˆÙ„ = ${rollLenM} Ù… Â· Ø³Ø¹Ø± Ø§Ù„Ù…ØªØ±: ${cur} ${price}`;
    }
  </script>
</body>
</html>
