<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±ÙˆÙ„Ø§Øª (ØªÙØ§ØµÙŠÙ„ + ØªØ­ÙˆÙŠÙ„ Ø¹Ù…Ù„Ø©)</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f7f7f7;margin:0;padding:20px}
    .app{max-width:860px;margin:auto;background:#fff;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,.06);padding:22px}
    h1{font-size:22px;margin:0 0 14px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:720px){.row{grid-template-columns:1fr}}
    label{font-weight:700;font-size:13px;margin:4px 0;display:block}
    input,select{width:100%;padding:10px 12px;border:1px solid #e2e2e2;border-radius:8px;box-sizing:border-box}
    .muted{color:#888;font-size:12px}
    .btn{margin-top:12px;background:#111;color:#fff;border:none;border-radius:10px;padding:12px 16px;font-weight:700;cursor:pointer}
    .grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:16px}
    @media(max-width:920px){.grid{grid-template-columns:1fr 1fr}}
    @media(max-width:620px){.grid{grid-template-columns:1fr}}
    .card{background:#fafafa;border:1px solid #eee;border-radius:10px;padding:14px}
    .num{font-size:20px;font-weight:800}
    .warn{display:none;color:#b30000;background:#ffe5e5;border:1px solid #ffb8b8;padding:10px;border-radius:8px;margin-top:10px}
  </style>
</head>
<body>
  <div class="app">
    <h1>ğŸ“ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±ÙˆÙ„Ø§Øª (ØªÙØ§ØµÙŠÙ„ + ØªØ­ÙˆÙŠÙ„ Ø¹Ù…Ù„Ø©)</h1>

    <div class="row">
      <div>
        <label>Ø·ÙˆÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ… (Ø³Ù…)</label>
        <input id="designH" type="number" step="0.01" placeholder="Ù…Ø«Ø§Ù„: 27.5">
      </div>
      <div>
        <label>Ø¹Ø±Ø¶ Ø§Ù„ØªØµÙ…ÙŠÙ… (Ø³Ù…)</label>
        <input id="designW" type="number" step="0.01" placeholder="Ù…Ø«Ø§Ù„: 50">
      </div>
      <div>
        <label>Ø·ÙˆÙ„ Ø§Ù„Ø±ÙˆÙ„ (Ù…ØªØ±)</label>
        <input id="rollLen" type="number" step="0.01" value="25">
      </div>
      <div>
        <label>Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆÙ„ (Ø³Ù…)</label>
        <input id="rollW" type="number" step="0.01" value="50">
      </div>
      <div>
        <label>Ø¹Ø¯Ø¯ Ø§Ù„ØªØµØ§Ù…ÙŠÙ… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
        <input id="qty" type="number" step="1" value="1">
      </div>
      <div>
        <label>Ø³Ø¹Ø± Ø§Ù„Ù…ØªØ± (Ø¨Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„ØªÙŠ Ø£Ø¯Ø®Ù„ØªÙ‡Ø§)</label>
        <input id="pricePerM" type="number" step="0.01" value="0">
        <div class="muted">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ù„ÙƒÙ„ Ù…ØªØ±ØŒ Ø«Ù… Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø© Ø£Ø¯Ù†Ø§Ù‡ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø¯Ø®Ù„.</div>
      </div>

      <div>
        <label>Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„ØªÙŠ Ø£Ø¯Ø®Ù„Øª Ø¨Ù‡Ø§ Ø§Ù„Ø³Ø¹Ø±</label>
        <select id="currency">
          <option value="USD" data-rate="1" data-symbol="USD">USD (Ø¯ÙˆÙ„Ø§Ø±)</option>
          <option value="AED" data-rate="3.67" data-symbol="AED">AED (Ø¯Ø±Ù‡Ù…)</option>
          <option value="EUR" data-rate="0.93" data-symbol="EUR">EUR (ÙŠÙˆØ±Ùˆ)</option>
          <option value="SAR" data-rate="3.75" data-symbol="SAR">SAR (Ø±ÙŠØ§Ù„)</option>
          <option value="TRY" data-rate="34.0" data-symbol="TRY">TRY (Ù„ÙŠØ±Ø©)</option>
          <option value="CUSTOM" data-rate="1" data-symbol="">Ù…Ø¹Ø¯Ù„ Ù…Ø®ØµØµâ€¦</option>
        </select>
        <div class="muted">Ø§Ù„Ù…Ø¹Ø¯Ù„ Ù‡Ùˆ: <b>USD â†’ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</b>. Ø¹Ø¯Ù‘Ù„ ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ø¥Ø°Ø§ Ù„Ø²Ù….</div>
      </div>
      <div id="customRateWrap" style="display:none;">
        <label>Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Ù…Ù† USD â†’ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©)</label>
        <input id="customRate" type="number" step="0.0001" value="1">
        <div class="muted">Ù…Ø«Ø§Ù„: Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª AED Ø§ÙƒØªØ¨ 3.67</div>
      </div>
    </div>

    <button class="btn" onclick="calc()">Ø§Ø­Ø³Ø¨</button>
    <div id="warn" class="warn">âš ï¸ Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø© Ù…Ù† ÙØ¶Ù„Ùƒ.</div>

    <div class="grid">
      <div class="card">
        <div class="muted">Ø¹Ø¯Ø¯ Ø§Ù„ØªØµØ§Ù…ÙŠÙ… Ø¹Ø±Ø¶ÙŠÙ‹Ø§</div>
        <div id="across" class="num">-</div>
      </div>
      <div class="card">
        <div class="muted">Ø¹Ø¯Ø¯ Ø§Ù„ØªØµØ§Ù…ÙŠÙ… Ø·ÙˆÙ„ÙŠÙ‹Ø§ (ÙÙŠ Ø§Ù„Ø±ÙˆÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯)</div>
        <div id="down" class="num">-</div>
      </div>
      <div class="card">
        <div class="muted">Ø¹Ø¯Ø¯ Ø§Ù„ØªØµØ§Ù…ÙŠÙ… ÙÙŠ Ø§Ù„Ø±ÙˆÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯</div>
        <div id="perRoll" class="num">-</div>
      </div>
      <div class="card">
        <div class="muted">Ø¹Ø¯Ø¯ Ø§Ù„Ø±ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</div>
        <div id="rolls" class="num">-</div>
      </div>
      <div class="card">
        <div class="muted">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù…ØªØ§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</div>
        <div id="meters" class="num">-</div>
      </div>
      <div class="card">
        <div class="muted">Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© (Ø¨Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©)</div>
        <div id="total" class="num">-</div>
      </div>
      <div class="card">
        <div class="muted">Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© (Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± USD)</div>
        <div id="totalUSD" class="num">-</div>
      </div>
      <div class="card">
        <div class="muted">Ø§Ù„ØªÙƒÙ„ÙØ© Ù„Ù„ÙˆØ­Ø¯Ø© (Ø¨Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©)</div>
        <div id="unit" class="num">-</div>
      </div>
    </div>
  </div>

<script>
  const currency = document.getElementById('currency');
  const customWrap = document.getElementById('customRateWrap');
  const customRate = document.getElementById('customRate');

  currency.addEventListener('change', () => {
    customWrap.style.display = currency.value === 'CUSTOM' ? 'block' : 'none';
  });

  function fmt(n, sym){
    return (isFinite(n)? n.toFixed(2) : '-') + (sym? (' ' + sym) : '');
  }

  function calc(){
    const h_cm = parseFloat(document.getElementById('designH').value);
    const w_cm = parseFloat(document.getElementById('designW').value);
    const rollLen_m = parseFloat(document.getElementById('rollLen').value);
    const rollW_cm = parseFloat(document.getElementById('rollW').value);
    const qty = parseInt(document.getElementById('qty').value||'1',10);
    const priceEntered = parseFloat(document.getElementById('pricePerM').value);

    if([h_cm,w_cm,rollLen_m,rollW_cm,priceEntered].some(x=>!isFinite(x)||x<=0) || !isFinite(qty) || qty<=0){
      document.getElementById('warn').style.display='block'; return;
    } else {
      document.getElementById('warn').style.display='none';
    }

    const h_m = h_cm / 100;
    const w_m = w_cm / 100;

    // Ø§Ù„ØªØ¹Ø¨Ø¦Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø±ÙˆÙ„
    const across = Math.floor(rollW_cm / w_cm);
    const downPerRoll = Math.floor(rollLen_m / h_m);
    const perRoll = across * downPerRoll;

    if(across <= 0 || downPerRoll <= 0){
      ['across','down','perRoll','rolls','meters','total','unit','totalUSD'].forEach(id => document.getElementById(id).textContent = '-');
      return;
    }

    const rowsNeeded = Math.ceil(qty / across);
    const metersUsed = rowsNeeded * h_m;
    const rollsNeeded = Math.ceil(metersUsed / rollLen_m);

    // Ø§Ù„Ø¹Ù…Ù„Ø©: Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø© Ù‡ÙŠ Ø¨Ø³Ø¹Ø± Ø§Ù„Ù…ØªØ± ÙÙŠ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
    const opt = currency.options[currency.selectedIndex];
    const sym = opt.dataset.symbol || '';
    let rate = parseFloat(opt.dataset.rate || '1'); // USD -> selected
    if(currency.value === 'CUSTOM'){
      const cr = parseFloat(customRate.value);
      if(isFinite(cr) && cr>0) rate = cr;
    }

    // Ø§Ù„ØªÙƒÙ„ÙØ© Ø¨Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
    const totalSelected = metersUsed * priceEntered;
    const unitSelected = totalSelected / qty;

    // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø¯ÙˆÙ„Ø§Ø±: Ø¥Ø°Ø§ ÙƒØ§Ù† rate = USD -> selected ØŒ Ø¥Ø°Ù‹Ø§ USD = selected / rate
    const totalUSD = totalSelected / rate;

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    document.getElementById('across').textContent = across;
    document.getElementById('down').textContent = downPerRoll;
    document.getElementById('perRoll').textContent = perRoll;
    document.getElementById('rolls').textContent = rollsNeeded;
    document.getElementById('meters').textContent = metersUsed.toFixed(2) + ' Ù…';
    document.getElementById('total').textContent = fmt(totalSelected, sym);
    document.getElementById('unit').textContent  = fmt(unitSelected, sym);
    document.getElementById('totalUSD').textContent = fmt(totalUSD, 'USD');
  }
</script>
</body>
</html>
